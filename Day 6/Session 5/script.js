// Complete Keywords Data with All Features - Session 5 (Final Version)
const keywordsData = {
    html: [
        {
            keyword: "<!DOCTYPE html>",
            description: "Document type declaration that tells the browser this is an HTML5 document",
            category: "Document Structure"
        },
        {
            keyword: "<html>",
            description: "Root element that wraps all content on the page",
            category: "Document Structure"
        },
        {
            keyword: "<head>",
            description: "Contains metadata about the document (title, links, scripts)",
            category: "Document Structure"
        },
        {
            keyword: "<title>",
            description: "Sets the title that appears in the browser tab",
            category: "Document Structure"
        },
        {
            keyword: "<meta>",
            description: "Provides metadata about the HTML document",
            category: "Document Structure"
        },
        {
            keyword: "<body>",
            description: "Contains all visible content of the webpage",
            category: "Document Structure"
        },
        {
            keyword: "<header>",
            description: "Represents introductory content or navigational aids",
            category: "Semantic Elements"
        },
        {
            keyword: "<nav>",
            description: "Represents a section with navigation links",
            category: "Semantic Elements"
        },
        {
            keyword: "<main>",
            description: "Represents the main content of the document",
            category: "Semantic Elements"
        },
        {
            keyword: "<section>",
            description: "Represents a standalone section of content",
            category: "Semantic Elements"
        },
        {
            keyword: "<article>",
            description: "Represents self-contained content that could be distributed independently",
            category: "Semantic Elements"
        },
        {
            keyword: "<aside>",
            description: "Represents content that is tangentially related to the main content",
            category: "Semantic Elements"
        },
        {
            keyword: "<footer>",
            description: "Represents the footer of a document or section",
            category: "Semantic Elements"
        },
        {
            keyword: "<h1> to <h6>",
            description: "Heading elements that define hierarchical structure (h1 is most important)",
            category: "Text Elements"
        },
        {
            keyword: "<p>",
            description: "Represents a paragraph of text",
            category: "Text Elements"
        },
        {
            keyword: "<a>",
            description: "Creates hyperlinks to other pages or sections",
            category: "Text Elements"
        },
        {
            keyword: "<img>",
            description: "Embeds an image in the document",
            category: "Media Elements"
        },
        {
            keyword: "<video>",
            description: "Embeds video content in the document",
            category: "Media Elements"
        },
        {
            keyword: "<audio>",
            description: "Embeds audio content in the document",
            category: "Media Elements"
        },
        {
            keyword: "<canvas>",
            description: "Creates a drawing surface for graphics and animations",
            category: "Media Elements"
        },
        {
            keyword: "<svg>",
            description: "Creates scalable vector graphics",
            category: "Media Elements"
        },
        {
            keyword: "<ul>",
            description: "Creates an unordered (bulleted) list",
            category: "List Elements"
        },
        {
            keyword: "<ol>",
            description: "Creates an ordered (numbered) list",
            category: "List Elements"
        },
        {
            keyword: "<li>",
            description: "Represents a list item",
            category: "List Elements"
        },
        {
            keyword: "<div>",
            description: "Generic container element for grouping content",
            category: "Container Elements"
        },
        {
            keyword: "<span>",
            description: "Inline generic container for styling or scripting",
            category: "Container Elements"
        },
        {
            keyword: "<form>",
            description: "Creates a form for user input",
            category: "Form Elements"
        },
        {
            keyword: "<input>",
            description: "Creates various input controls (text, email, password, etc.)",
            category: "Form Elements"
        },
        {
            keyword: "<button>",
            description: "Creates a clickable button",
            category: "Form Elements"
        },
        {
            keyword: "<label>",
            description: "Associates a label with a form control",
            category: "Form Elements"
        },
        {
            keyword: "<textarea>",
            description: "Creates a multi-line text input control",
            category: "Form Elements"
        },
        {
            keyword: "<select>",
            description: "Creates a dropdown list of options",
            category: "Form Elements"
        },
        {
            keyword: "<option>",
            description: "Defines an option in a select element",
            category: "Form Elements"
        },
        {
            keyword: "<table>",
            description: "Creates a table for tabular data",
            category: "Table Elements"
        },
        {
            keyword: "<tr>",
            description: "Defines a table row",
            category: "Table Elements"
        },
        {
            keyword: "<td>",
            description: "Defines a table cell",
            category: "Table Elements"
        },
        {
            keyword: "<th>",
            description: "Defines a table header cell",
            category: "Table Elements"
        },
        {
            keyword: "<iframe>",
            description: "Embeds another HTML page within the current page",
            category: "Embedded Content"
        },
        {
            keyword: "<embed>",
            description: "Embeds external content or plugins",
            category: "Embedded Content"
        },
        {
            keyword: "<object>",
            description: "Embeds external resources like multimedia",
            category: "Embedded Content"
        },
        {
            keyword: "<strong>",
            description: "Indicates important text (typically bold)",
            category: "Text Formatting"
        },
        {
            keyword: "<em>",
            description: "Indicates emphasized text (typically italic)",
            category: "Text Formatting"
        },
        {
            keyword: "<mark>",
            description: "Highlights text for reference purposes",
            category: "Text Formatting"
        },
        {
            keyword: "<code>",
            description: "Represents inline code",
            category: "Text Formatting"
        },
        {
            keyword: "<pre>",
            description: "Represents preformatted text (preserves whitespace)",
            category: "Text Formatting"
        },
        {
            keyword: "<blockquote>",
            description: "Represents a block quotation",
            category: "Text Formatting"
        },
        {
            keyword: "<details>",
            description: "Creates a disclosure widget with summary",
            category: "Interactive Elements"
        },
        {
            keyword: "<summary>",
            description: "Provides a summary for a details element",
            category: "Interactive Elements"
        },
        {
            keyword: "<dialog>",
            description: "Creates a modal dialog box",
            category: "Interactive Elements"
        }
    ],
    css: [
        {
            keyword: "color",
            description: "Sets the color of text",
            category: "Typography"
        },
        {
            keyword: "font-size",
            description: "Sets the size of the font",
            category: "Typography"
        },
        {
            keyword: "font-family",
            description: "Specifies the font family for text",
            category: "Typography"
        },
        {
            keyword: "font-weight",
            description: "Sets the weight (boldness) of the font",
            category: "Typography"
        },
        {
            keyword: "text-align",
            description: "Aligns text horizontally (left, center, right, justify)",
            category: "Typography"
        },
        {
            keyword: "line-height",
            description: "Sets the height of a line of text",
            category: "Typography"
        },
        {
            keyword: "text-decoration",
            description: "Adds decoration to text (underline, overline, line-through)",
            category: "Typography"
        },
        {
            keyword: "text-transform",
            description: "Controls text capitalization (uppercase, lowercase, capitalize)",
            category: "Typography"
        },
        {
            keyword: "background-color",
            description: "Sets the background color of an element",
            category: "Background"
        },
        {
            keyword: "background-image",
            description: "Sets one or more background images for an element",
            category: "Background"
        },
        {
            keyword: "background-size",
            description: "Specifies the size of background images",
            category: "Background"
        },
        {
            keyword: "background-position",
            description: "Sets the position of background images",
            category: "Background"
        },
        {
            keyword: "background-repeat",
            description: "Sets how background images are repeated",
            category: "Background"
        },
        {
            keyword: "width",
            description: "Sets the width of an element",
            category: "Layout"
        },
        {
            keyword: "height",
            description: "Sets the height of an element",
            category: "Layout"
        },
        {
            keyword: "margin",
            description: "Sets the margin area on all four sides of an element",
            category: "Layout"
        },
        {
            keyword: "padding",
            description: "Sets the padding area on all four sides of an element",
            category: "Layout"
        },
        {
            keyword: "border",
            description: "Sets all border properties in one declaration",
            category: "Layout"
        },
        {
            keyword: "border-radius",
            description: "Rounds the corners of an element's border",
            category: "Layout"
        },
        {
            keyword: "display",
            description: "Specifies the display behavior of an element (block, inline, flex, grid)",
            category: "Layout"
        },
        {
            keyword: "position",
            description: "Specifies the type of positioning for an element (static, relative, absolute, fixed, sticky)",
            category: "Layout"
        },
        {
            keyword: "top, right, bottom, left",
            description: "Specifies the position of positioned elements",
            category: "Layout"
        },
        {
            keyword: "float",
            description: "Specifies the floating behavior of an element (left, right, none)",
            category: "Layout"
        },
        {
            keyword: "clear",
            description: "Specifies how an element should behave after floating (left, right, both, none)",
            category: "Layout"
        },
        {
            keyword: "z-index",
            description: "Sets the stacking order of elements (positive, negative, auto)",
            category: "Layout"
        },
        {
            keyword: "flexbox",
            description: "CSS Flexible Box Layout for one-dimensional layouts",
            category: "Layout"
        },
        {
            keyword: "grid",
            description: "CSS Grid Layout for two-dimensional layouts",
            category: "Layout"
        },
        {
            keyword: "box-shadow",
            description: "Adds shadow effects around an element's frame",
            category: "Effects"
        },
        {
            keyword: "opacity",
            description: "Sets the opacity level for an element (0.0 to 1.0)",
            category: "Effects"
        },
        {
            keyword: "transform",
            description: "Applies 2D or 3D transformations to an element",
            category: "Effects"
        },
        {
            keyword: "transition",
            description: "Creates smooth transitions between property changes",
            category: "Effects"
        },
        {
            keyword: "animation",
            description: "Applies animations to elements using keyframes",
            category: "Effects"
        }
    ],
    javascript: [
        {
            keyword: "var",
            description: "Declares a function-scoped or globally-scoped variable (pre-ES6)",
            category: "Variable Declarations"
        },
        {
            keyword: "let",
            description: "Declares a block-scoped variable (ES6+)",
            category: "Variable Declarations"
        },
        {
            keyword: "const",
            description: "Declares a block-scoped constant; cannot be reassigned (ES6+)",
            category: "Variable Declarations"
        },
        {
            keyword: "function",
            description: "Declares a function",
            category: "Function Declarations"
        },
        {
            keyword: "arrow function",
            description: "Shorter syntax for writing function expressions (ES6+)",
            category: "Function Declarations"
        },
        {
            keyword: "class",
            description: "Declares a class (ES6+)",
            category: "Object-Oriented Programming"
        },
        {
            keyword: "extends",
            description: "Used in class declarations to create a subclass (ES6+)",
            category: "Object-Oriented Programming"
        },
        {
            keyword: "super",
            description: "Calls parent class constructor or methods (ES6+)",
            category: "Object-Oriented Programming"
        },
        {
            keyword: "import",
            description: "Imports modules or exports from another file (ES6+)",
            category: "Modules"
        },
        {
            keyword: "export",
            description: "Exports modules or variables to be imported (ES6+)",
            category: "Modules"
        },
        {
            keyword: "await",
            description: "Pauses async function execution until a Promise resolves (ES8+)",
            category: "Asynchronous Programming"
        },
        {
            keyword: "async",
            description: "Defines an asynchronous function that may use await (ES8+)",
            category: "Asynchronous Programming"
        },
        {
            keyword: "Promise",
            description: "Represents the eventual completion or failure of an async operation",
            category: "Asynchronous Programming"
        },
        {
            keyword: "if",
            description: "Conditional statement; executes code if condition is true",
            category: "Control Flow"
        },
        {
            keyword: "else",
            description: "Follows an if statement; executes code if condition is false",
            category: "Control Flow"
        },
        {
            keyword: "else if",
            description: "Provides additional conditions to test if previous conditions are false",
            category: "Control Flow"
        },
        {
            keyword: "switch",
            description: "Multi-branch conditional; switches execution based on expression",
            category: "Control Flow"
        },
        {
            keyword: "case",
            description: "Defines a branch in a switch statement",
            category: "Control Flow"
        },
        {
            keyword: "default",
            description: "Default branch in a switch statement when no case matches",
            category: "Control Flow"
        },
        {
            keyword: "for",
            description: "Loop that iterates based on initializer, condition, and increment",
            category: "Loops"
        },
        {
            keyword: "for...in",
            description: "Loop that iterates over the enumerable properties of an object",
            category: "Loops"
        },
        {
            keyword: "for...of",
            description: "Loop that iterates over iterable objects (arrays, strings, etc.)",
            category: "Loops"
        },
        {
            keyword: "while",
            description: "Loop that executes as long as condition remains true",
            category: "Loops"
        },
        {
            keyword: "do...while",
            description: "Loop that executes the block at least once before checking condition",
            category: "Loops"
        },
        {
            keyword: "continue",
            description: "Skips to the next iteration of a loop",
            category: "Loops"
        },
        {
            keyword: "break",
            description: "Exits the current loop or switch statement immediately",
            category: "Control Flow"
        },
        {
            keyword: "try",
            description: "Defines a block of code to test for errors",
            category: "Error Handling"
        },
        {
            keyword: "catch",
            description: "Catches errors thrown in a try block",
            category: "Error Handling"
        },
        {
            keyword: "finally",
            description: "Executes code after try/catch, regardless of outcome",
            category: "Error Handling"
        },
        {
            keyword: "throw",
            description: "Throws a custom error",
            category: "Error Handling"
        },
        {
            keyword: "return",
            description: "Exits a function and optionally returns a value",
            category: "Function Control"
        },
        {
            keyword: "new",
            description: "Creates an instance of a constructor function or class",
            category: "Object-Oriented Programming"
        },
        {
            keyword: "this",
            description: "Refers to the current execution context (object)",
            category: "Object Context"
        },
        {
            keyword: "instanceof",
            description: "Checks whether an object is an instance of a specific class or constructor",
            category: "Operators"
        },
        {
            keyword: "typeof",
            description: "Returns the type of a variable as a string",
            category: "Operators"
        },
        {
            keyword: "delete",
            description: "Removes a property from an object",
            category: "Operators"
        },
        {
            keyword: "in",
            description: "Tests whether a property exists in an object",
            category: "Operators"
        },
        {
            keyword: "void",
            description: "Evaluates an expression and returns undefined",
            category: "Operators"
        },
        {
            keyword: "yield",
            description: "Pauses and resumes a generator function (ES6+)",
            category: "Generators"
        },
        {
            keyword: "null",
            description: "Represents an intentional absence of any object value",
            category: "Literals"
        },
        {
            keyword: "undefined",
            description: "Represents a variable that has not been assigned a value",
            category: "Literals"
        },
        {
            keyword: "true",
            description: "Boolean literal for true",
            category: "Literals"
        },
        {
            keyword: "false",
            description: "Boolean literal for false",
            category: "Literals"
        }
    ]
};

// DOM elements
const htmlCountEl = document.getElementById('htmlCount');
const cssCountEl = document.getElementById('cssCount');
const jsCountEl = document.getElementById('jsCount');
const htmlGrid = document.getElementById('htmlKeywords');
const cssGrid = document.getElementById('cssKeywords');
const jsGrid = document.getElementById('jsKeywords');
const searchInput = document.getElementById('searchInput');
const searchBtn = document.getElementById('searchBtn');
const clearBtn = document.getElementById('clearBtn');
const categoryFilter = document.getElementById('categoryFilter');
const sortBy = document.getElementById('sortBy');
const navButtons = document.querySelectorAll('.nav-btn');
const sections = {
  html: document.getElementById('html-section'),
  css: document.getElementById('css-section'),
  javascript: document.getElementById('javascript-section')
};

// Helper to create keyword cards
function createCard(item, type) {
  const card = document.createElement('div');
  card.classList.add('keyword-card', type);
  card.innerHTML = `
    <div class="keyword-title">${item.keyword}</div>
    <div class="keyword-description">${item.description}</div>
    <div class="keyword-category category-${type}">${item.category}</div>
  `;
  return card;
}

// Sort function
function sortData(data, sortBy) {
  return [...data].sort((a, b) => {
    switch (sortBy) {
      case 'keyword':
        return a.keyword.localeCompare(b.keyword);
      case 'category':
        return a.category.localeCompare(b.category);
      case 'description':
        return b.description.length - a.description.length;
      default:
        return 0;
    }
  });
}

// Filter and sort data
function filterAndSortData(data, query, category, sortBy) {
  let filtered = data.filter(item => {
    const matchesQuery = query === '' || 
      item.keyword.toLowerCase().includes(query) ||
      item.description.toLowerCase().includes(query) ||
      item.category.toLowerCase().includes(query);
    
    const matchesCategory = category === '' || item.category === category;
    
    return matchesQuery && matchesCategory;
  });
  
  return sortData(filtered, sortBy);
}

// Populate all grids and counts
function populateAll() {
  htmlGrid.innerHTML = '';
  cssGrid.innerHTML = '';
  jsGrid.innerHTML = '';

  keywordsData.html.forEach(item => htmlGrid.appendChild(createCard(item, 'html')));
  keywordsData.css.forEach(item => cssGrid.appendChild(createCard(item, 'css')));
  keywordsData.javascript.forEach(item => jsGrid.appendChild(createCard(item, 'javascript')));

  htmlCountEl.textContent = keywordsData.html.length;
  cssCountEl.textContent = keywordsData.css.length;
  jsCountEl.textContent = keywordsData.javascript.length;
}

// Filter logic
function filterAndDisplay() {
  const query = searchInput.value.trim().toLowerCase();
  const category = categoryFilter.value;
  const sort = sortBy.value;

  // Helper to filter and render
  const applyFilter = (dataArray, grid, type) => {
    grid.innerHTML = '';
    const filtered = filterAndSortData(dataArray, query, category, sort);
    filtered.forEach(item => grid.appendChild(createCard(item, type)));
    return filtered.length;
  };

  if (sections.html.classList.contains('active')) {
    htmlCountEl.textContent = applyFilter(keywordsData.html, htmlGrid, 'html');
  } else if (sections.css.classList.contains('active')) {
    cssCountEl.textContent = applyFilter(keywordsData.css, cssGrid, 'css');
  } else if (sections.javascript.classList.contains('active')) {
    jsCountEl.textContent = applyFilter(keywordsData.javascript, jsGrid, 'javascript');
  }
}

// Tab switcher
navButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    // Active button
    navButtons.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    // Show section
    Object.values(sections).forEach(sec => sec.classList.remove('active'));
    sections[btn.dataset.section].classList.add('active');
    // Trigger search again to reset filtered view
    filterAndDisplay();
  });
});

// Search button
searchBtn.addEventListener('click', filterAndDisplay);

// Clear button functionality
clearBtn.addEventListener('click', () => {
  searchInput.value = '';
  categoryFilter.value = '';
  sortBy.value = 'keyword';
  searchInput.focus();
  populateAll();
});

// Support live search typing on Enter and real-time search
searchInput.addEventListener('keyup', e => {
  if (e.key === 'Enter') {
    filterAndDisplay();
  } else {
    // Real-time search as user types (with small delay)
    clearTimeout(window.searchTimeout);
    window.searchTimeout = setTimeout(filterAndDisplay, 300);
  }
});

// Clear search functionality
searchInput.addEventListener('input', () => {
  if (searchInput.value.trim() === '') {
    filterAndDisplay();
  }
});

// Filter change handlers
categoryFilter.addEventListener('change', filterAndDisplay);
sortBy.addEventListener('change', filterAndDisplay);

// Keyboard shortcuts
document.addEventListener('keydown', (e) => {
  // Ctrl/Cmd + K to focus search
  if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
    e.preventDefault();
    searchInput.focus();
  }
  
  // Escape to clear search
  if (e.key === 'Escape') {
    searchInput.value = '';
    categoryFilter.value = '';
    sortBy.value = 'keyword';
    populateAll();
  }
});

// Initial population
populateAll();
